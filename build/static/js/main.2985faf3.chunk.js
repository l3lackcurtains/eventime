(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{419:function(e,t,n){e.exports=n(746)},424:function(e,t,n){},746:function(e,t,n){"use strict";n.r(t);var a=n(1),r=n.n(a),c=n(12),i=n.n(c),l=n(395),o=n(155),u=n(190),s=(n(424),n(80)),m=n(66),d=n(50),p=n(761),f=n(5),b=n(18),E=n.n(b);function v(){var e=Object(f.a)(["\n  {\n    getUser {\n      id\n    }\n  }\n"]);return v=function(){return e},e}var h=E()(v()),g=function(e){var t=e.component,n=Object(d.a)(e,["component"]),a=Object(p.a)(h),c=a.data,i=a.error,l=a.loading,o=!i&&c;return l?null:r.a.createElement(s.b,Object.assign({},n,{render:function(e){return o?r.a.createElement(t,e):r.a.createElement(s.a,{to:{pathname:"/login",state:{from:e.location}}})}}))},j=n(23),y=n.n(j),x=n(30),O=n(20),k=n(754),S=n(13),w=n(748),I=n(62),C=n(29),T=n(749),$=n(15),P=n(27),D=n(394),q=n(756),A=(n(396),n(161)),R=n(762),N=n(367),F=n.n(N),z=n(16),B=n.n(z);function M(){var e=Object(f.a)(["\n  margin-bottom: 16px;\n  margin-top: -24px;\n"]);return M=function(){return e},e}var V=function(e){var t=e.label,n=e.required,a=e.colon,c=e.extra,i=e.hideError,l=e.validateStatus,o=Object(d.a)(e,["label","required","colon","extra","hideError","validateStatus"]),u=Object(C.c)(e.name),s=Object(O.a)(u,2),m=s[0],p=s[1],f=l||"",b="";return p.touched&&p.error&&(f="error",i||(b=p.error)),r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a.Item,{label:t,required:n,colon:a,extra:c,validateStatus:f,help:b},r.a.createElement(D.a,Object.assign({},o,m))))},L=function(e){var t=e.label,n=e.required,a=e.colon,c=e.extra,i=e.validateStatus,l=Object(d.a)(e,["label","required","colon","extra","validateStatus"]),o=Object(C.c)(e.name),u=Object(O.a)(o,2),s=u[0],m=u[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a.Item,{label:t,required:n,colon:a,extra:c,validateStatus:i},r.a.createElement(F.a,Object.assign({},l,s))),m.touched&&m.error?r.a.createElement(G,{message:m.error,type:"error"}):null)},H=function(e){var t=e.label,n=e.required,a=e.colon,c=e.extra,i=e.validateStatus,l=(e.value,Object(d.a)(e,["label","required","colon","extra","validateStatus","value"])),o=Object(C.c)(e.name),u=Object(O.a)(o,2),s=u[0],m=u[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a.Item,{label:t,required:n,colon:a,extra:c,validateStatus:i},r.a.createElement(C.a,{name:s.name},function(e){var t=e.field.value,n=e.form.setFieldValue;return r.a.createElement(q.a,Object.assign({value:t?B()(t):void 0,onChange:function(e){return n(s.name,e?e.toISOString():null)}},l))})),m.touched&&m.error?r.a.createElement(G,{message:m.error,type:"error"}):null)},J=function(e){var t=e.label,n=e.required,a=e.colon,c=e.extra,i=e.validateStatus,l=(e.value,e.options),o=Object(d.a)(e,["label","required","colon","extra","validateStatus","value","options"]),u=Object(C.c)(e.name),s=Object(O.a)(u,2),m=s[0],p=s[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a.Item,{label:t,required:n,colon:a,extra:c,validateStatus:i},r.a.createElement(C.a,{name:m.name},function(e){var t=e.field.value,n=e.form.setFieldValue;return r.a.createElement(A.a,Object.assign({showSearch:!0,value:t||void 0,optionFilterProp:"children",onChange:function(e){return n(m.name,e)},filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},o),l.map(function(e){return r.a.createElement(A.a.Option,{key:e.key,value:e.value},e.text)}))})),p.touched&&p.error?r.a.createElement(G,{message:p.error,type:"error"}):null)},U=function(e){var t=e.label,n=e.required,a=e.colon,c=e.extra,i=e.validateStatus,l=(e.value,e.options),o=Object(d.a)(e,["label","required","colon","extra","validateStatus","value","options"]),u=Object(C.c)(e.name),s=Object(O.a)(u,2),m=s[0],p=s[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a.Item,{label:t,required:n,colon:a,extra:c,validateStatus:i},r.a.createElement(C.a,{name:m.name},function(e){var t=e.field.value,n=e.form.setFieldValue;return r.a.createElement(A.a,Object.assign({showSearch:!0,mode:"multiple",value:t||void 0,optionFilterProp:"children",defaultValue:[],onChange:function(e){return n(m.name,e)},filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},o),l.map(function(e){return r.a.createElement(A.a.Option,{key:e.key,value:e.value},e.text)}))})),p.touched&&p.error?r.a.createElement(G,{message:p.error,type:"error"}):null)},W=function(e){var t=e.label,n=e.required,a=e.colon,c=e.extra,i=(e.value,e.options),l=Object(d.a)(e,["label","required","colon","extra","value","options"]),o=Object(C.c)(e.name),u=Object(O.a)(o,2),s=u[0],m=u[1],p=function(e,t){return e.map(function(n,a){var c=t[a];return a===e.length-1?r.a.createElement("span",{key:c.value},n):r.a.createElement("span",{key:c.value},n," / ")})};return r.a.createElement(r.a.Fragment,null,r.a.createElement(k.a.Item,{label:t,required:n,colon:a,extra:c},r.a.createElement(C.a,{name:s.name},function(e){var t=e.field.value,n=e.form.setFieldValue;return r.a.createElement(R.a,Object.assign({options:i,displayRender:p,value:t||void 0,onChange:function(e){return n(s.name,e)},defaultValue:[]},l))})),m.touched&&m.error?r.a.createElement(G,{message:m.error,type:"error"}):null)},G=Object($.a)(w.a)(M());function K(){var e=Object(f.a)(["\n  mutation Login($email: String!, $password: String!) {\n    login(email: $email, password: $password)\n  }\n"]);return K=function(){return e},e}var _=E()(K());function Y(){var e=Object(f.a)(["\n  margin: 16px 4px;\n"]);return Y=function(){return e},e}function Q(){var e=Object(f.a)(["\n  width: 450px;\n  padding: 36px;\n  background: #fff;\n  border: 2px solid #e3e3e3;\n  border-radius: 10px;\n"]);return Q=function(){return e},e}function X(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: space-around;\n  margin: 120px 0;\n"]);return X=function(){return e},e}var Z=P.object().shape({email:P.string().email("Invalid email").required("Email is Required"),password:P.string().required("Password is required").min(6,"Password too Short!")}),ee=$.a.div(X()),te=$.a.div(Q()),ne=$.a.div(Y()),ae=function(e){var t=Object(a.useState)([]),n=Object(O.a)(t,2),c=n[0],i=n[1],l=Object(T.a)(_);return r.a.createElement(ee,null,r.a.createElement(te,null,r.a.createElement(C.b,{initialValues:{email:"",password:""},validationSchema:Z,onSubmit:function(){var t=Object(x.a)(y.a.mark(function t(n){var a,r,c,o;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.email,r=n.password,t.prev=1,t.next=4,l({variables:{email:a,password:r}});case 4:c=t.sent,i([]),c.data&&e.history.push("/dashboard"),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(1),o=[],t.t0.graphQLErrors.forEach(function(e,t){o.push(e.message.split("rror:")[1])}),i(o);case 14:case"end":return t.stop()}},t,null,[[1,9]])}));return function(e){return t.apply(this,arguments)}}(),render:function(e){return r.a.createElement(k.a,{onSubmit:e.handleSubmit},r.a.createElement(V,{prefix:r.a.createElement(S.a,{type:"user"}),placeholder:"email",label:"Email",name:"email",type:"email",size:"large"}),r.a.createElement(V,{prefix:r.a.createElement(S.a,{type:"lock"}),type:"password",placeholder:"Password",label:"Password",name:"password",size:"large"}),r.a.createElement(k.a.Item,null,c.length>0?r.a.createElement(w.a,{message:"Error",description:r.a.createElement(r.a.Fragment,null,c.map(function(e,t){return r.a.createElement("div",{key:t},e)})),type:"error",showIcon:!0,closable:!0,onClose:function(){return i([])}}):null),r.a.createElement(k.a.Item,null,r.a.createElement(I.a,{type:"primary",htmlType:"submit"},"Login")),r.a.createElement(ne,null,r.a.createElement(m.b,{to:"/register"},"Register")))}})))};function re(){var e=Object(f.a)(["\n  mutation Register($email: String!, $password: String!, $name: String!) {\n    register(email: $email, password: $password, name: $name)\n  }\n"]);return re=function(){return e},e}var ce=E()(re());function ie(){var e=Object(f.a)(["\n  margin: 16px 4px;\n"]);return ie=function(){return e},e}function le(){var e=Object(f.a)(["\n  width: 450px;\n  padding: 36px;\n  background: #fff;\n  border: 2px solid #e3e3e3;\n  border-radius: 10px;\n"]);return le=function(){return e},e}function oe(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: space-around;\n  margin: 120px 0;\n"]);return oe=function(){return e},e}var ue=P.object().shape({name:P.string().required("Name is Required"),email:P.string().email("Invalid email").required("Email is Required"),password:P.string().required("Password is required").min(6,"Password too Short!"),passwordConfirmation:P.string().oneOf([P.ref("password"),""],"Passwords must match")}),se=$.a.div(oe()),me=$.a.div(le()),de=$.a.div(ie()),pe=function(e){var t=Object(a.useState)([]),n=Object(O.a)(t,2),c=n[0],i=n[1],l=Object(T.a)(ce);return r.a.createElement(se,null,r.a.createElement(me,null,r.a.createElement(C.b,{initialValues:{email:"",password:"",name:""},validationSchema:ue,onSubmit:function(){var t=Object(x.a)(y.a.mark(function t(n){var a,r,c,o,u;return y.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.email,r=n.password,c=n.name,t.prev=1,t.next=4,l({variables:{name:c,email:a,password:r}});case 4:o=t.sent,i([]),o.data&&e.history.push("/login"),t.next=14;break;case 9:t.prev=9,t.t0=t.catch(1),u=[],t.t0.graphQLErrors.forEach(function(e,t){u.push(e.message.split("rror:")[1])}),i(u);case 14:case"end":return t.stop()}},t,null,[[1,9]])}));return function(e){return t.apply(this,arguments)}}(),render:function(e){return r.a.createElement(k.a,{onSubmit:e.handleSubmit},r.a.createElement(V,{prefix:r.a.createElement(S.a,{type:"user"}),placeholder:"name",label:"Name",name:"name",size:"large"}),r.a.createElement(V,{prefix:r.a.createElement(S.a,{type:"user"}),placeholder:"email",label:"Email",type:"email",name:"email",size:"large"}),r.a.createElement(V,{prefix:r.a.createElement(S.a,{type:"lock"}),type:"password",placeholder:"Password",label:"Password",name:"password",size:"large"}),r.a.createElement(V,{prefix:r.a.createElement(S.a,{type:"lock"}),type:"password",placeholder:"Retype Password",label:"Retype Password",name:"passwordConfirmation",size:"large"}),r.a.createElement(k.a.Item,null,c.length>0?r.a.createElement(w.a,{message:"Error",description:r.a.createElement(r.a.Fragment,null,c.map(function(e,t){return r.a.createElement("div",{key:t},e)})),type:"error",showIcon:!0,closable:!0,onClose:function(){return i([])}}):null),r.a.createElement(k.a.Item,null,r.a.createElement(I.a,{type:"primary",htmlType:"submit"},"Register")),r.a.createElement(de,null,r.a.createElement(m.b,{to:"/login"},"Login")))}})))},fe=n(753),be=n(763),Ee=n(207),ve=n(275),he=n(750);function ge(){var e=Object(f.a)(["\n  mutation Logout {\n    logout\n  }\n"]);return ge=function(){return e},e}var je=E()(ge());function ye(){var e=Object(f.a)(["\n  display: grid;\n  grid-template-columns: auto 250px;\n  width: 100%;\n  .header-right {\n    span {\n      margin-right: 16px;\n    }\n  }\n"]);return ye=function(){return e},e}var xe=$.a.div(ye()),Oe=function(e){var t=Object(T.a)(je);return r.a.createElement(xe,null,r.a.createElement("div",{className:"header-left"}),r.a.createElement("div",{className:"header-right"},r.a.createElement(Ee.a,{overlay:r.a.createElement(ve.b,null,r.a.createElement(ve.b.Item,null,r.a.createElement("a",{onClick:function(){}},"Edit Profile")),r.a.createElement(ve.b.Item,null,r.a.createElement("a",{onClick:function(){var n=Object(x.a)(y.a.mark(function n(a){var r;return y.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),n.next=3,t();case 3:(r=n.sent)&&r.data&&e.history.push("/login");case 5:case"end":return n.stop()}},n)}));return function(e){return n.apply(this,arguments)}}()},"Logout"))),trigger:["click"]},r.a.createElement("a",{className:"ant-dropdown-link",href:"#"},r.a.createElement("span",null,"Madhav Poudel ",r.a.createElement(S.a,{type:"down"})),r.a.createElement(he.a,{size:48,icon:"user"})))))},ke=[{key:1,name:"Dashboard",path:"/dashboard",icon:"pie-chart"},{key:2,name:"Timer",path:"/dashboard/timer",icon:"desktop"},{key:3,name:"Projects",path:"/dashboard/projects",icon:"check-square"},{key:4,name:"Clients",path:"/dashboard/clients",icon:"usergroup-add"},{key:5,name:"Reports",path:"/dashboard/reports",icon:"snippets"},{key:6,name:"Expenses",path:"/dashboard/expenses",icon:"pie-chart"},{key:7,name:"Invoices",path:"/dashboard/invoices",icon:"area-chart"}],Se=function(){var e=window.location.pathname,t=[];return ke.forEach(function(n){e.includes(n.path)&&t.push(""+n.key)}),t.length>1&&t.shift(),r.a.createElement(ve.b,{defaultSelectedKeys:t,mode:"inline",style:{height:"100%",borderRight:0}},ke.map(function(e){return r.a.createElement(ve.b.Item,{key:e.key},r.a.createElement(m.b,{to:e.path},r.a.createElement(S.a,{type:e.icon}),r.a.createElement("span",{className:"nav-text"},e.name)))}))},we=n(757),Ie=n(755),Ce=n(759);function Te(){var e=Object(f.a)(["\n  {\n    getClients {\n      id\n      name\n    }\n  }\n"]);return Te=function(){return e},e}var $e=E()(Te()),Pe=n(751);function De(){var e=Object(f.a)(["\n  mutation CreateClient($name: String!, $details: String) {\n    createClient(name: $name, details: $details) {\n      success\n      message\n    }\n  }\n"]);return De=function(){return e},e}var qe=E()(De()),Ae=P.object().shape({name:P.string().required("Name is Required")}),Re=function(e){var t=e.onChangeClientModalState,n=e.refetchClients,a=Object(T.a)(qe),c=function(){var e=Object(x.a)(y.a.mark(function e(r,c){var i,l,o;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=c.resetForm,l=r.name,o=r.details,e.next=4,a({variables:{name:l,details:o}});case 4:e.sent.data.createClient.success&&(t(!1),i(),n());case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}();return r.a.createElement(C.b,{initialValues:{},validationSchema:Ae,onSubmit:c,render:function(e){return r.a.createElement(k.a,{layout:"vertical",onSubmit:e.handleSubmit},r.a.createElement(V,{label:"Client name",size:"large",placeholder:"Name of client",name:"name"}),r.a.createElement(L,{label:"Client Information",placeholder:"Important information about clients",rows:4,name:"details"}),r.a.createElement(Pe.a,null),r.a.createElement(k.a.Item,null,r.a.createElement(I.a,{type:"primary",htmlType:"submit"},"Create Client")))}})};function Ne(){var e=Object(f.a)(["\n  margin: 24px 0;\n"]);return Ne=function(){return e},e}function Fe(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  h1 {\n    padding: 8px 0;\n  }\n"]);return Fe=function(){return e},e}var ze=r.a.createElement(ve.b,null,r.a.createElement(ve.b.Item,null,"Archive"),r.a.createElement(ve.b.Item,null,"Unarchive")),Be=[{title:"Name",dataIndex:"name"}],Me=$.a.div(Fe()),Ve=$.a.div(Ne()),Le=function(){var e=Object(p.a)($e),t=Object(a.useState)([]),n=Object(O.a)(t,2),c=n[0],i=n[1],l={selectedRowKeys:c,onChange:function(e){i(e)}},o=c.length>0,u=Object(a.useState)(!1),s=Object(O.a)(u,2),m=s[0],d=s[1],f=function(e){d(e)};if(e.loading)return null;if(e.error)return r.a.createElement("div",null,"Error loading client..");var b=e.data.getClients;return b.map(function(e){return e.key=e.id,e}),r.a.createElement("div",null,r.a.createElement(we.a,{title:r.a.createElement(r.a.Fragment,null,r.a.createElement(Me,null,r.a.createElement("h1",null,"Clients"),r.a.createElement(I.a,{type:"primary",icon:"plus",size:"large",onClick:function(){return f(!0)}},"Add Client")))},r.a.createElement(Ve,null,r.a.createElement(Ee.a,{overlay:ze,placement:"bottomCenter",disabled:!o},r.a.createElement(I.a,{type:"dashed"},"Bulk Actions")),r.a.createElement("span",{style:{marginLeft:8}},o?"Selected ".concat(c.length," items"):"")),r.a.createElement(Ie.a,{rowSelection:l,columns:Be,dataSource:b})),r.a.createElement(Ce.a,{title:"Add a new Client",style:{top:20},visible:m,onOk:function(){return f(!1)},onCancel:function(){return f(!1)},width:750,footer:null},r.a.createElement(Re,{onChangeClientModalState:f,refetchClients:e.refetch})))},He=function(){return r.a.createElement("div",null,"Dash Page")},Je=n(139),Ue=n(77);function We(){var e=Object(f.a)(["\n  query getGroupedExpensesStat {\n    getGroupedExpensesStat {\n      total\n      categoryStat {\n        total\n        category\n        percentage\n      }\n    }\n  }\n"]);return We=function(){return e},e}function Ge(){var e=Object(f.a)(["\n  query getExpense($id: ID!) {\n    getExpense(id: $id) {\n      amount\n      details\n      billable\n      category\n      date\n    }\n  }\n"]);return Ge=function(){return e},e}function Ke(){var e=Object(f.a)(["\n  {\n    getExpenses {\n      amount\n      details\n      billable\n      category\n      date\n      user {\n        email\n      }\n      project {\n        name\n      }\n    }\n  }\n"]);return Ke=function(){return e},e}var _e=E()(Ke()),Ye=(E()(Ge()),E()(We())),Qe=n(71),Xe=n(758);function Ze(){var e=Object(f.a)(["\n  mutation createExpense(\n    $amount: Int!\n    $projectId: ID!\n    $userId: ID!\n    $details: String\n    $billable: Boolean\n    $category: String!\n    $date: String!\n  ) {\n    createExpense(\n      amount: $amount\n      projectId: $projectId\n      userId: $userId\n      details: $details\n      billable: $billable\n      category: $category\n      date: $date\n    )\n  }\n"]);return Ze=function(){return e},e}var et=E()(Ze());function tt(){var e=Object(f.a)(["\n  {\n    getProjectWithTasks {\n      success\n      results {\n        id\n        name\n        sections {\n          id\n          name\n          tasks {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"]);return tt=function(){return e},e}function nt(){var e=Object(f.a)(["\n  {\n    getProjects {\n      success\n      results {\n        id\n        name\n        slug\n      }\n    }\n  }\n"]);return nt=function(){return e},e}var at=E()(nt()),rt=E()(tt());function ct(){var e=Object(f.a)(["\n  {\n    getWorkshopUsers {\n      id\n      email\n    }\n  }\n"]);return ct=function(){return e},e}var it=E()(ct());function lt(){var e=Object(f.a)(["\n  margin-right: 16px;\n"]);return lt=function(){return e},e}D.a.TextArea,A.a.Option;var ot=P.object().shape({category:P.string().required("Category is Required"),details:P.string().required("Details is required"),user:P.string().required("Member is required."),project:P.string().required("Project is required.")}),ut=[{key:1,value:"transportation",text:"Transportation"},{key:2,value:"infrastracture",text:"Infrastracture"},{key:3,value:"officeNeed",text:"Office needs"},{key:4,value:"service",text:"Service"},{key:5,value:"others",text:"Others"}],st=Object($.a)(I.a)(lt()),mt=function(e){var t=e.onChangeExpenseModalState,n=e.refetchExpenses,c=e.refetchExpensesStats,i=Object(a.useState)([]),l=Object(O.a)(i,2),o=l[0],u=l[1],s=Object(p.a)(it),m=Object(p.a)(at),d=[];if(!s.loading&&!s.error){var f=s.data.getWorkshopUsers;d=f.map(function(e){return e.key=e.id,e.value=e.id,e.text=e.email,e})}var b=[];if(!m.loading&&!m.error){var E=m.data.getProjects.results;b=E.map(function(e){return e.key=e.id,e.value=e.id,e.text=e.name,e})}var v=Object(T.a)(et);function h(e){var t=Object(Qe.a)(e.fileList);return t=(t=t.slice(-2)).map(function(e){return e.response&&(e.url=e.response.url),e}),u(t),null}var g=function(){var e=Object(x.a)(y.a.mark(function e(a,r){var i,l,o,u,s,m,d;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.resetForm,l=a.category,o=a.date,u=a.amount,s=a.project,m=a.user,d=a.details,e.next=4,v({variables:{category:l,date:o,amount:u,projectId:s,userId:m,details:d}});case 4:e.sent.data.createExpense&&(i(),t(!1),n(),c());case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}();return r.a.createElement("section",null,r.a.createElement(C.b,{initialValues:{},validationSchema:ot,onSubmit:g,render:function(e){return r.a.createElement(k.a,{layout:"vertical",onSubmit:e.handleSubmit},r.a.createElement(J,{label:"Category",size:"large",placeholder:"Select a Category",name:"category",options:ut}),r.a.createElement(L,{label:"Details",size:"large",placeholder:"Details of expense",name:"details",rows:5}),r.a.createElement(Je.a,{type:"flex",gutter:16},r.a.createElement(Ue.a,{xs:12},r.a.createElement(V,{label:"Expense Amount",name:"amount",size:"large",placeholder:"Expense Amount",type:"number"})),r.a.createElement(Ue.a,{xs:12},r.a.createElement(H,{size:"large",label:"Date",placeholder:"Date",name:"date"}))),r.a.createElement(k.a.Item,null,r.a.createElement(Xe.a,{onChange:h,multiple:!0,fileList:o},r.a.createElement(I.a,null,r.a.createElement(S.a,{type:"upload"})," Attachments"))),r.a.createElement(Je.a,{type:"flex",gutter:16},r.a.createElement(Ue.a,{xs:12},r.a.createElement(J,{label:"Project",size:"large",placeholder:"Select a Project",name:"project",options:b})),r.a.createElement(Ue.a,{xs:12},r.a.createElement(J,{label:"Member",size:"large",placeholder:"Select a Member",name:"user",options:d}))),r.a.createElement(k.a.Item,null,r.a.createElement(st,{type:"primary",htmlType:"submit"},"Create Expense")))}}))},dt=n(58),pt=["#0088FE","#00C49F","#FFBB28","#FF8042"],ft=Math.PI/180,bt=function(e){var t=e.cx,n=e.cy,a=e.midAngle,c=e.innerRadius,i=e.outerRadius,l=e.percent,o=c+.5*(i-c),u=t+o*Math.cos(-a*ft),s=n+o*Math.sin(-a*ft);return r.a.createElement("text",{x:u,y:s,fill:"white",textAnchor:u>t?"start":"end",dominantBaseline:"central"},"".concat((100*l).toFixed(0),"%"))},Et=function(e){var t=e.expenseStatsData;if(!t)return null;t.map(function(e,t){return e.name=e.category,e});var n=t.filter(function(e){return 0!==e.percentage});return r.a.createElement(dt.h,{width:"100%",height:200},r.a.createElement(dt.g,null,r.a.createElement(dt.f,{data:n,labelLine:!1,label:bt,outerRadius:100,fill:"#8884d8",dataKey:"percentage"},n.map(function(e,t){return r.a.createElement(dt.d,{key:"cell-".concat(t),fill:pt[t%pt.length]})}))))};function vt(){var e=Object(f.a)(["\n  span {\n    font-size: 11px;\n    color: #777;\n  }\n  p {\n    margin: 4px 0;\n  }\n"]);return vt=function(){return e},e}function ht(){var e=Object(f.a)(["\n  margin: 24px 0;\n"]);return ht=function(){return e},e}function gt(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  h1 {\n    padding: 8px 0;\n  }\n"]);return gt=function(){return e},e}var jt=r.a.createElement(ve.b,null,r.a.createElement(ve.b.Item,null,"Delete")),yt=[{title:"Expense",dataIndex:"category",render:function(e,t){return r.a.createElement(St,null,r.a.createElement("p",null,e),r.a.createElement("span",null,t.details))}},{title:"Project",dataIndex:"projectName"},{title:"Member",dataIndex:"userEmail"},{title:"Date",dataIndex:"date"},{title:"Amount",dataIndex:"amount"}],xt=[{title:"category",dataIndex:"category"},{title:"Amount",dataIndex:"total"},{title:"Percentage",dataIndex:"percentage"}],Ot=$.a.div(gt()),kt=$.a.div(ht()),St=$.a.div(vt()),wt=function(){var e=Object(a.useState)([]),t=Object(O.a)(e,2),n=t[0],c=t[1],i={selectedRowKeys:n,onChange:function(e){c(e)}},l=n.length>0,o=Object(a.useState)(!1),u=Object(O.a)(o,2),s=u[0],m=u[1],d=Object(p.a)(_e),f=Object(p.a)(Ye),b=function(e){m(e)},E=[];d.loading||d.error||(E=d.data.getExpenses).map(function(e){return e.key=e.id,e.date=B()(e.date).fromNow(),e.projectName=e.project.name,e.userEmail=e.user.email,e});var v=f.loading?null:f.data.getGroupedExpensesStat.categoryStat;return r.a.createElement("div",null,r.a.createElement(we.a,{title:r.a.createElement(Ot,null,r.a.createElement("h1",null,"Expenses"),r.a.createElement(I.a,{type:"primary",icon:"plus",size:"large",onClick:function(){return b(!0)}},"Add Expense"))},r.a.createElement(Je.a,null,r.a.createElement(Ue.a,{sm:12},r.a.createElement(Et,{expenseStatsData:v})),r.a.createElement(Ue.a,{sm:12},r.a.createElement(Ie.a,{columns:xt,dataSource:v,pagination:!1,size:"small"}))),r.a.createElement(kt,null,r.a.createElement(Ee.a,{overlay:jt,placement:"bottomCenter",disabled:!l},r.a.createElement(I.a,{type:"dashed"},"Bulk Actions")),r.a.createElement("span",{style:{marginLeft:8}},l?"Selected ".concat(n.length," items"):"")),r.a.createElement(Ie.a,{rowSelection:i,columns:yt,dataSource:E})),r.a.createElement(Ce.a,{title:"Add a new Expense",style:{top:20},visible:s,footer:null,onOk:function(){return b(!1)},onCancel:function(){return b(!1)}},r.a.createElement(mt,{onChangeExpenseModalState:b,refetchExpenses:d.refetch,refetchExpensesStats:f.refetch})))},It=n(135),Ct=A.a.Option,Tt=q.a.RangePicker,$t=function(){for(var e=[],t=10;t<36;t++)e.push(r.a.createElement(Ct,{key:t.toString(36)+t},t.toString(36)+t));function n(e){}return r.a.createElement("div",null,r.a.createElement(k.a,{layout:"vertical"},r.a.createElement(k.a.Item,{label:"Client"},r.a.createElement(A.a,{showSearch:!0,size:"large",placeholder:"Select a Client",optionFilterProp:"children",onChange:function(e){},filterOption:function(e,t){return t.props.children.toLowerCase().indexOf(e.toLowerCase())>=0}},r.a.createElement(Ct,{value:"client1"},"Client 1"),r.a.createElement(Ct,{value:"client2"},"Client 2"))),r.a.createElement(k.a.Item,{label:"Projects"},r.a.createElement(A.a,{mode:"multiple",size:"large",style:{width:"100%"},placeholder:"Select Projects",defaultValue:[],onChange:n},e)),r.a.createElement(k.a.Item,{label:"Period (optional)"},r.a.createElement(Tt,{size:"large",onChange:function(e,t){}})),r.a.createElement(k.a.Item,null,r.a.createElement(It.a,{onChange:n},"Include Expenses"))))},Pt=[{name:"Jan, 2019",amount:2400},{name:"Feb, 2019",amount:1398},{name:"Mar, 2019",amount:9800},{name:"Apr, 2019",amount:3908},{name:"May, 2019",amount:4800},{name:"Jun, 2019",amount:3800},{name:"Jul, 2019",amount:4300},{name:"Aug, 2019",amount:100},{name:"Sep, 2019",amount:4500},{name:"Oct, 2019",amount:1200},{name:"Nov, 2019",amount:200},{name:"Dec, 2019",amount:3400}],Dt=function(){return r.a.createElement(dt.h,{width:"100%",height:300},r.a.createElement(dt.b,{data:Pt,margin:{top:20,right:30,left:20,bottom:5}},r.a.createElement(dt.c,{strokeDasharray:"0 0"}),r.a.createElement(dt.j,{dataKey:"name"}),r.a.createElement(dt.k,null),r.a.createElement(dt.i,null),r.a.createElement(dt.e,null),r.a.createElement(dt.a,{dataKey:"amount",stackId:"a",fill:"#30336b"})))};function qt(){var e=Object(f.a)(["\n  margin: 24px 0;\n"]);return qt=function(){return e},e}function At(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  h1 {\n    padding: 8px 0;\n  }\n"]);return At=function(){return e},e}var Rt=r.a.createElement(ve.b,null,r.a.createElement(ve.b.Item,null,"Delete")),Nt=[{title:"Client",dataIndex:"client"},{title:"Period",dataIndex:"period"},{title:"Duration",dataIndex:"duration"},{title:"Amount",dataIndex:"amount"},{title:"Issue Date",dataIndex:"issueDate"},{title:"Status",dataIndex:"status"}],Ft=[{key:"1",client:"The Moisture Factory",period:"May 1 to Dec 12",duration:"23h 45m",amount:6780,issueDate:"Dec 12",status:"draft"},{key:"2",client:"Brian Van Rooyen",period:"May 12 to Sep 12",duration:"45h 12m",amount:12300,issueDate:"Sep 12",status:"paid"}],zt=$.a.div(At()),Bt=$.a.div(qt()),Mt=function(){var e=Object(a.useState)([]),t=Object(O.a)(e,2),n=t[0],c=t[1],i={selectedRowKeys:n,onChange:function(e){c(e)}},l=n.length>0,o=Object(a.useState)(!1),u=Object(O.a)(o,2),s=u[0],m=u[1],d=function(e){m(e)};return r.a.createElement("div",null,r.a.createElement(we.a,{title:r.a.createElement(zt,null,r.a.createElement("h1",null,"Invoices"),r.a.createElement(I.a,{type:"primary",icon:"plus",size:"large",onClick:function(){return d(!0)}},"Create Invoice"))},r.a.createElement(Je.a,null,r.a.createElement(Dt,null)),r.a.createElement("div",{style:{padding:"48px 16px",borderRadius:8}},r.a.createElement(Bt,null,r.a.createElement(Ee.a,{overlay:Rt,placement:"bottomCenter",disabled:!l},r.a.createElement(I.a,{type:"dashed"},"Bulk Actions")),r.a.createElement("span",{style:{marginLeft:8}},l?"Selected ".concat(n.length," items"):"")),r.a.createElement(Ie.a,{rowSelection:i,columns:Nt,dataSource:Ft}))),r.a.createElement(Ce.a,{title:"Create Invoice",style:{top:20},visible:s,onOk:function(){return d(!1)},onCancel:function(){return d(!1)}},r.a.createElement($t,null)))};function Vt(){var e=Object(f.a)(["\n  mutation CreateProject($name: String!, $clientId: ID!, $users: [ID!]!) {\n    createProject(name: $name, clientId: $clientId, users: $users) {\n      success\n      message\n    }\n  }\n"]);return Vt=function(){return e},e}var Lt=E()(Vt());function Ht(){var e=Object(f.a)(["\n  margin-right: 16px;\n"]);return Ht=function(){return e},e}var Jt=P.object().shape({name:P.string().required("Name is Required"),client:P.string().required("Client is Required"),members:P.array().required("Atleast one Member is Required")}),Ut=Object($.a)(I.a)(Ht()),Wt=function(e){var t=e.setCreateProjectModalVisible,n=e.refetchProjects,a=Object(p.a)($e),c=Object(p.a)(it),i=Object(T.a)(Lt),l=function(){var e=Object(x.a)(y.a.mark(function e(a,r){var c,l,o,u;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return c=r.resetForm,l=a.name,o=a.client,u=a.members,e.next=4,i({variables:{name:l,clientId:o,users:u}});case 4:e.sent.data.createProject.success&&(c(),t(!1),n());case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),o=[];if(!a.loading&&!a.error){var u=a.data.getClients;o=u.map(function(e){return e.key=e.id,e.value=e.id,e.text=e.name,e})}var s=[];if(!c.loading&&!c.error){var m=c.data.getWorkshopUsers;s=m.map(function(e){return e.key=e.id,e.value=e.id,e.text=e.email,e})}return 0===o.length?r.a.createElement("p",null,"You must add client first."):r.a.createElement(r.a.Fragment,null,r.a.createElement(C.b,{initialValues:{},validationSchema:Jt,onSubmit:l,render:function(e){return r.a.createElement(k.a,{layout:"vertical",onSubmit:e.handleSubmit},r.a.createElement(V,{label:"Project Name",size:"large",placeholder:"Name of project",name:"name"}),r.a.createElement(J,{label:"Select a Client",size:"large",placeholder:"Select a Client",name:"client",options:o}),r.a.createElement(U,{label:"Select Members",size:"large",placeholder:"Select Members",name:"members",options:s}),r.a.createElement(Pe.a,null),r.a.createElement(k.a.Item,null,r.a.createElement(Ut,{type:"primary",htmlType:"submit"},"Create Project")))}}))};function Gt(){var e=Object(f.a)(["\n  margin: 24px 0;\n"]);return Gt=function(){return e},e}function Kt(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  h1 {\n    padding: 8px 0;\n  }\n"]);return Kt=function(){return e},e}var _t=r.a.createElement(ve.b,null,r.a.createElement(ve.b.Item,null,"Archive"),r.a.createElement(ve.b.Item,null,"Unarchive")),Yt=[{title:"Name",dataIndex:"name",render:function(e,t){return r.a.createElement(m.b,{to:"/dashboard/projects/".concat(t.slug)},e)}}],Qt=$.a.div(Kt()),Xt=$.a.div(Gt()),Zt=function(){var e=Object(p.a)(at),t=e.data,n=e.error,c=e.loading,i=e.refetch,l=Object(a.useState)([]),o=Object(O.a)(l,2),u=o[0],s=o[1],m={selectedRowKeys:u,onChange:function(e){s(e)}},d=u.length>0,f=Object(a.useState)(!1),b=Object(O.a)(f,2),E=b[0],v=b[1],h=function(e){v(e)};if(c)return null;if(n)return r.a.createElement("div",null,"Error loading client..");var g=t.getProjects.results;return g.map(function(e){return e.key=e.id,e}),r.a.createElement(r.a.Fragment,null,r.a.createElement(we.a,{title:r.a.createElement(r.a.Fragment,null,r.a.createElement(Qt,null,r.a.createElement("h1",null,"Projects"),r.a.createElement(I.a,{type:"primary",icon:"plus",size:"large",onClick:function(){return h(!0)}},"Create Project")))},r.a.createElement(Xt,null,r.a.createElement(Ee.a,{overlay:_t,placement:"bottomCenter",disabled:!d},r.a.createElement(I.a,{type:"dashed"},"Bulk Actions")),r.a.createElement("span",{style:{marginLeft:8}},d?"Selected ".concat(u.length," items"):"")),r.a.createElement(Ie.a,{rowSelection:m,columns:Yt,dataSource:g})),r.a.createElement(Ce.a,{title:"Create Project",visible:E,footer:null,onOk:function(){return h(!1)},onCancel:function(){return h(!1)}},r.a.createElement(Wt,{setCreateProjectModalVisible:v,refetchProjects:i})))};function en(){var e=Object(f.a)(["\n  query GetProject($id: ID!) {\n    getProject(id: $id) {\n      success\n      result {\n        id\n        name\n        billing {\n          id\n        }\n        budget {\n          id\n        }\n        users {\n          id\n          email\n        }\n        client {\n          id\n          name\n        }\n      }\n    }\n  }\n"]);return en=function(){return e},e}function tn(){var e=Object(f.a)(["\n  query GetProjectBySlug($slug: String!) {\n    getProjectBySlug(slug: $slug) {\n      success\n      message\n      result {\n        id\n        name\n        sections {\n          id\n          name\n          tasks {\n            id\n            name\n            description\n            dueAt\n            createdAt\n            timerRecords {\n              duration\n              user {\n                email\n              }\n            }\n            estimate {\n              total\n            }\n          }\n        }\n      }\n    }\n  }\n"]);return tn=function(){return e},e}var nn=E()(tn()),an=(E()(en()),n(397)),rn=n(216);function cn(){var e=Object(f.a)(["\n  mutation CreateSection($projectId: ID!, $name: String!) {\n    createSection(projectId: $projectId, name: $name) {\n      success\n      message\n    }\n  }\n"]);return cn=function(){return e},e}var ln=E()(cn());function on(){var e=Object(f.a)(["\n  mutation CreateTask($sectionId: ID!, $name: String!) {\n    createTask(sectionId: $sectionId, name: $name) {\n      success\n      message\n    }\n  }\n"]);return on=function(){return e},e}var un=E()(on());function sn(){var e=Object(f.a)(["\n  mutation ReorderTaskBetweenSections(\n    $sourceSectionId: ID!\n    $destinationSectionId: ID!\n    $from: Int!\n    $to: Int!\n  ) {\n    reorderTaskBetweenSections(\n      sourceSectionId: $sourceSectionId\n      destinationSectionId: $destinationSectionId\n      from: $from\n      to: $to\n    )\n  }\n"]);return sn=function(){return e},e}function mn(){var e=Object(f.a)(["\n  mutation ReorderTask($sectionId: ID!, $from: Int!, $to: Int!) {\n    reorderTask(sectionId: $sectionId, from: $from, to: $to)\n  }\n"]);return mn=function(){return e},e}var dn=E()(mn()),pn=E()(sn());function fn(){var e=Object(f.a)(["\n  mutation DeleteSection($id: ID!) {\n    deleteSection(id: $id)\n  }\n"]);return fn=function(){return e},e}var bn=E()(fn()),En=function(e,t,n){var a=Array.from(e),r=a.splice(t,1),c=Object(O.a)(r,1)[0];return a.splice(n,0,c),a},vn=function(e,t,n,a){var r=Array.from(e),c=Array.from(t),i=r.splice(n.index,1),l=Object(O.a)(i,1)[0];c.splice(a.index,0,l);var o={};return o[n.droppableId]=r,o[a.droppableId]=c,o},hn=n(752);function gn(){var e=Object(f.a)(["\n  query GetProjectBilling($id: ID!) {\n    getProjectBilling(id: $id) {\n      success\n      result {\n        id\n        rate\n        type\n      }\n    }\n  }\n"]);return gn=function(){return e},e}var jn=E()(gn());function yn(){var e=Object(f.a)(["\n  query GetProjectBudget($id: ID!) {\n    getProjectBudget(id: $id) {\n      success\n      result {\n        id\n        amount\n        type\n        progress\n      }\n    }\n  }\n"]);return yn=function(){return e},e}var xn=E()(yn());function On(){var e=Object(f.a)(["\n  mutation SetProjectBilling($id: ID!, $rate: Int!, $type: String!) {\n    setProjectBilling(id: $id, rate: $rate, type: $type) {\n      success\n      message\n    }\n  }\n"]);return On=function(){return e},e}var kn=E()(On());function Sn(){var e=Object(f.a)(["\n  display: flex;\n  .type-field {\n    width: 130px !important;\n    margin-left: -4px;\n    border-radius: 0;\n  }\n  .rate-field {\n    width: 130px !important;\n  }\n"]);return Sn=function(){return e},e}var wn=[{key:1,value:"flat_rate",text:"Project Rate"},{key:2,value:"user_rate",text:"User Rate"}],In=$.a.div(Sn()),Cn=function(e){var t=Object(a.useContext)(ar).project,n=Object(p.a)(jn,{variables:{id:t.id}}),c=Object(p.a)(xn,{variables:{id:t.id}}),i=Object(a.useState)(!1),l=Object(O.a)(i,2),o=l[0],u=l[1],s=Object(T.a)(kn),m=function(){var e=Object(x.a)(y.a.mark(function e(a){var r,i;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.rate,i=a.type,e.next=3,s({variables:{id:t.id,rate:r,type:i}});case 3:e.sent.data.setProjectBilling.success&&(n.refetch(),c.refetch(),u(!1));case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),d={rate:0,type:"flat_rate"},f="h",b=0;if(n.loading)return null;if(n.data.getProjectBilling.success){var E=n.data.getProjectBilling.result;d={rate:E.rate,type:E.type},f="flat_rate"===E.type?"per project hour":"per user hour",b=E.rate}return r.a.createElement(hn.a,{className:"billing-section",content:r.a.createElement(C.b,{initialValues:d,onSubmit:m,render:function(e){return r.a.createElement(k.a,{onSubmit:e.handleSubmit},r.a.createElement(In,null,r.a.createElement(V,{className:"rate-field",name:"rate",type:"number"}),r.a.createElement(J,{className:"type-field",name:"type",options:wn,disabled:!0})),r.a.createElement(I.a,{type:"primary",htmlType:"submit"},"Save Billing"))}}),title:null,trigger:"click",visible:o,placement:"leftTop",onVisibleChange:function(e){return u(e)}},n.data.getProjectBilling.success?r.a.createElement("div",null,r.a.createElement("p",null,"Billing"),r.a.createElement("p",null,"".concat(b,"$ ").concat(f))):r.a.createElement("a",{className:"ant-dropdown-link",href:"#"},"Billing ",r.a.createElement(S.a,{type:"caret"})))},Tn=n(393);function $n(){var e=Object(f.a)(["\n  mutation SetProjectBudget($id: ID!, $amount: Int!, $type: String!) {\n    setProjectBudget(id: $id, amount: $amount, type: $type) {\n      success\n      message\n    }\n  }\n"]);return $n=function(){return e},e}var Pn=E()($n());function Dn(){var e=Object(f.a)(["\n  display: flex;\n  .time-field {\n    width: 100px !important;\n    margin-left: -4px;\n    border-radius: 0;\n  }\n  .amount-field {\n    width: 100px !important;\n  }\n"]);return Dn=function(){return e},e}var qn=[{key:1,value:"money",text:"$"},{key:2,value:"time",text:"Hours"}],An=$.a.div(Dn()),Rn=function(e){var t=Object(a.useContext)(ar).project,n=Object(p.a)(xn,{variables:{id:t.id}}),c=Object(a.useState)(!1),i=Object(O.a)(c,2),l=i[0],o=i[1],u=Object(T.a)(Pn),s=function(){var e=Object(x.a)(y.a.mark(function e(a){var r,c;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.amount,c=a.type,e.next=3,u({variables:{id:t.id,amount:r,type:c}});case 3:e.sent.data.setProjectBudget.success&&(o(!1),n.refetch());case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();if(n.loading)return null;var m=n.data.getProjectBudget.result,d={amount:0,type:"time"},f="h",b=0,E=0,v=0;return m&&(d={amount:m.amount,type:m.type},f="money"===m.type?"$":"h",b=parseInt(m.amount),E=parseInt(m.progress),v=Math.floor(E/b*100)),r.a.createElement(hn.a,{className:"budget-section",content:r.a.createElement(C.b,{initialValues:d,onSubmit:s,render:function(e){return r.a.createElement(k.a,{onSubmit:e.handleSubmit},r.a.createElement(An,null,r.a.createElement(V,{className:"amount-field",name:"amount",type:"number"}),r.a.createElement(J,{className:"time-field",name:"type",options:qn})),r.a.createElement(I.a,{type:"primary",htmlType:"submit"},"Save Budget"))}}),title:null,trigger:"click",visible:l,placement:"leftTop",onVisibleChange:function(e){return o(e)}},n.data.getProjectBudget.success?r.a.createElement("div",null,r.a.createElement("p",null,"Budget: ".concat(E).concat(f," of ").concat(b).concat(f)),r.a.createElement("div",null,r.a.createElement(Tn.a,{percent:v,strokeColor:"green"}))):r.a.createElement("a",{className:"ant-dropdown-link",href:"#"},"Budget ",r.a.createElement(S.a,{type:"caret"})))};function Nn(){var e=Object(f.a)(["\n  {\n    getTimer {\n      success\n      result {\n        id\n        startedAt\n        task {\n          id\n          name\n        }\n      }\n    }\n  }\n"]);return Nn=function(){return e},e}var Fn=E()(Nn());function zn(){var e=Object(f.a)(["\n  background: #fff8e1;\n  padding: 6px;\n  width: 60px;\n  border-radius: 8px;\n  font-size: 11px;\n  margin: 4px 0;\n"]);return zn=function(){return e},e}var Bn=function(e){var t=e.currentTimer,n=B()(),c=t.startedAt,i=B.a.duration(n.diff(c)),l=Object(a.useState)(i),o=Object(O.a)(l,2),u=o[0],s=o[1],m=setInterval(function(){var e=B()(),t=B.a.duration(e.diff(c));s(t)},1e3);return Object(a.useEffect)(function(){return function(){clearTimeout(m)}}),r.a.createElement(Mn,null,"".concat(B.a.utc(u.asMilliseconds()).format("HH:mm:ss")))},Mn=$.a.div(zn()),Vn=function(e){var t=e.task,n=Object(p.a)(Fn),a=n.data;return n.loading?null:a.getTimer.result&&t.id===a.getTimer.result.task.id?r.a.createElement(Bn,{currentTimer:a.getTimer.result}):null};function Ln(){var e=Object(f.a)(["\n  mutation UpdateProject(\n    $id: ID!\n    $name: String!\n    $clientId: ID!\n    $users: [ID!]!\n  ) {\n    updateProject(id: $id, name: $name, clientId: $clientId, users: $users) {\n      success\n      message\n    }\n  }\n"]);return Ln=function(){return e},e}var Hn=E()(Ln());function Jn(){var e=Object(f.a)(["\n  margin-right: 16px;\n"]);return Jn=function(){return e},e}var Un=P.object().shape({name:P.string().required("Name is Required"),client:P.string().required("Client is Required"),members:P.array().required("Atleast one Member is Required")}),Wn=Object($.a)(I.a)(Jn()),Gn=function(e){var t=e.setEditProjectVisible,n=Object(a.useContext)(ar),c=n.project,i=n.refetchProject,l=Object(p.a)($e),o=Object(p.a)(it),u=Object(T.a)(Hn),s=function(){var e=Object(x.a)(y.a.mark(function e(n,a){var r,l,o,s;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.resetForm,l=n.name,o=n.client,s=n.members,e.next=4,u({variables:{id:c.id,name:l,clientId:o,users:s}});case 4:e.sent.data.updateProject.success&&(r(),i(),t(!1));case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),m=[];if(!l.loading&&!l.error){var d=l.data.getClients;m=d.map(function(e){return e.key=e.id,e.value=e.id,e.text=e.name,e})}var f=[];if(!o.loading&&!o.error){var b=o.data.getWorkshopUsers;f=b.map(function(e){return e.key=e.id,e.value=e.id,e.text=e.email,e})}return 0===m.length?r.a.createElement("p",null,"You must add client first."):r.a.createElement(C.b,{initialValues:{name:c.name,client:c.client&&c.client.id,members:c.users&&c.users.reduce(function(e,t){return e.push(t.id),e},[])},validationSchema:Un,onSubmit:s,render:function(e){return r.a.createElement(k.a,{layout:"vertical",onSubmit:e.handleSubmit},r.a.createElement(V,{label:"Project Name",size:"large",placeholder:"Name of project",name:"name"}),r.a.createElement(J,{label:"Select a Client",size:"large",placeholder:"Select a Client",name:"client",options:m}),r.a.createElement(U,{label:"Select Members",size:"large",placeholder:"Select Members",name:"members",options:f}),r.a.createElement(Pe.a,null),r.a.createElement(k.a.Item,null,r.a.createElement(Wn,{type:"primary",htmlType:"submit"},"Update Project")))}})};function Kn(){var e=Object(f.a)(["\n  mutation UpdateSection($id: ID!, $name: String) {\n    updateSection(id: $id, name: $name) {\n      success\n      message\n    }\n  }\n"]);return Kn=function(){return e},e}var _n=E()(Kn());function Yn(){var e=Object(f.a)(["\n  margin-right: 16px;\n"]);return Yn=function(){return e},e}var Qn=P.object().shape({name:P.string().required("Name is Required")}),Xn=Object($.a)(I.a)(Yn()),Zn=function(e){var t=e.setEditSectionView,n=e.refetchProject,a=e.section,c=Object(T.a)(_n),i=a.name,l=function(){var e=Object(x.a)(y.a.mark(function e(r){var i;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=r.name,e.next=3,c({variables:{id:a.id,name:i}});case 3:t(!1),n();case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.b,{initialValues:{name:i},validationSchema:Qn,onSubmit:l,render:function(e){return r.a.createElement(k.a,{onSubmit:e.handleSubmit},r.a.createElement(V,{placeholder:"Section name",label:"Name",name:"name"}),r.a.createElement(k.a.Item,null,r.a.createElement(Xn,{type:"primary",htmlType:"submit"},"Update"),r.a.createElement(Xn,{onClick:function(){return t(!1)}},"Cancel")))}}))};function ea(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: space-between;\n  .left-actions {\n    display: flex;\n  }\n\n  .right-actions {\n    display: flex;\n    .billing-section {\n      margin-right: 16px;\n      cursor: pointer;\n      background: #fff;\n      border: 1px solid #f1f1f1;\n      padding: 4px 16px;\n      border-radius: 10px;\n    }\n    .budget-section {\n      cursor: pointer;\n      margin-right: 24px;\n      background: #fff;\n      border: 1px solid #f1f1f1;\n      padding: 4px 16px;\n      border-radius: 10px;\n    }\n  }\n  h1 {\n    margin-right: 16px;\n  }\n"]);return ea=function(){return e},e}function ta(){var e=Object(f.a)(["\n  padding: 24px 8px;\n  margin: 0 16px;\n  .add-project-area {\n    padding: 80px 0;\n  }\n"]);return ta=function(){return e},e}function na(){var e=Object(f.a)(["\n  margin: 16px 0px;\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  span {\n    margin-right: 24px;\n  }\n"]);return na=function(){return e},e}function aa(){var e=Object(f.a)(["\n  width: 300px;\n  margin-top: 24px;\n  padding-right: 6px;\n  min-height: 600px;\n"]);return aa=function(){return e},e}function ra(){var e=Object(f.a)(["\n  margin-bottom: 16px;\n  border-left: 5px solid #000;\n  .ant-card-body {\n    padding: 16px 16px 4px 24px;\n  }\n  .card-meta {\n    display: flex;\n    flex-direction: row;\n    align-items: baseline;\n    justify-content: space-between;\n    font-size: 0.8em;\n    color: #999;\n    margin: 8px 0;\n  }\n"]);return ra=function(){return e},e}function ca(){var e=Object(f.a)(["\n  padding: 8px;\n  margin-right: 16px;\n  background: #fcfcfc;\n  width: 300px;\n"]);return ca=function(){return e},e}function ia(){var e=Object(f.a)(['\n  display: flex;\n  flex-direction: "row";\n  overflow-x: "auto";\n  overflow-y: hidden;\n  min-height: 700px;\n  ::-webkit-scrollbar {\n    height: 0.6em;\n    @media (max-width: 500px) {\n      height: 0;\n      width: 0;\n    }\n  }\n\n  ::-webkit-scrollbar-track {\n    box-shadow: inset 0 0 6px rgba(0, 0, 0, 0.3);\n  }\n\n  ::-webkit-scrollbar-thumb {\n    background-color: darkgrey;\n    border-radius: 4px;\n    outline: 1px solid slategrey;\n  }\n']);return ia=function(){return e},e}var la=$.a.section(ia()),oa=$.a.div(ca()),ua=Object($.a)(we.a)(ra()),sa=$.a.div(aa()),ma=Object($.a)(Ee.a)(na()),da=$.a.div(ta()),pa=$.a.div(ea());function fa(){var e=Object(f.a)(["\n  mutation AddEstimateToTask($id: ID!, $total: Int!) {\n    addEstimateToTask(id: $id, total: $total) {\n      success\n      message\n    }\n  }\n"]);return fa=function(){return e},e}var ba=E()(fa());function Ea(){var e=Object(f.a)(["\n  margin: 8px 36px;\n"]);return Ea=function(){return e},e}function va(){var e=Object(f.a)(["\n  margin-right: 16px;\n"]);return va=function(){return e},e}var ha=P.object().shape({total:P.number().required()}),ga=Object($.a)(I.a)(va()),ja=$.a.div(Ea()),ya=function(e){var t=Object(a.useState)(!1),n=Object(O.a)(t,2),c=n[0],i=n[1],l=e.currentTask,o=Object(T.a)(ba),u=Object(a.useContext)(ar).refetchProject,s=function(){var e=Object(x.a)(y.a.mark(function e(t,n){var a,r;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.resetForm,r=t.total,e.next=4,o({variables:{id:l.id,total:r}});case 4:e.sent.data.addEstimateToTask.success&&(a({date:B()(),duration:"01:00",description:""}),i(!1),u());case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}();return r.a.createElement(hn.a,{visible:c,content:r.a.createElement(ja,null,r.a.createElement(C.b,{initialValues:{total:l.estimate?l.estimate.total:0},validationSchema:ha,onSubmit:s,render:function(e){return r.a.createElement(k.a,{onSubmit:e.handleSubmit},r.a.createElement(V,{label:"Estimate Duration",placeholder:"Estimate in Hour",name:"total",type:"number",block:!0,required:!0}),r.a.createElement(k.a.Item,null,r.a.createElement(ga,{type:"primary",htmlType:"submit"},"Save"),r.a.createElement(ga,{onClick:function(){return i(!1)}},"Cancel")))}})),title:null,placement:"bottomLeft"},r.a.createElement(ga,{block:!0,onClick:function(){return i(!0)}},"Add Estimate"))};function xa(){var e=Object(f.a)(["\n  mutation AddTimeToTask(\n    $taskId: ID!\n    $duration: String!\n    $date: String!\n    $description: String\n  ) {\n    addTimeToTask(\n      taskId: $taskId\n      duration: $duration\n      date: $date\n      description: $description\n    ) {\n      success\n      message\n    }\n  }\n"]);return xa=function(){return e},e}var Oa=E()(xa());function ka(){var e=Object(f.a)(["\n  margin: 8px 36px;\n"]);return ka=function(){return e},e}function Sa(){var e=Object(f.a)(["\n  margin-right: 16px;\n"]);return Sa=function(){return e},e}var wa=P.object().shape({date:P.string().required("Name is Required"),duration:P.string().matches(/^([0-9]|0[0-9]|1[0-9]|2[0-3]):([0-9]|[0-5][0-9])$/,"Not a duration format")}),Ia=Object($.a)(I.a)(Sa()),Ca=$.a.div(ka()),Ta=function(e){var t=Object(a.useState)(!1),n=Object(O.a)(t,2),c=n[0],i=n[1],l=e.currentTask,o=Object(T.a)(Oa),u=Object(a.useContext)(ar),s=u.project,m=u.refetchProject,d=Object(p.a)(xn,{variables:{id:s.id}}),f=function(){var e=Object(x.a)(y.a.mark(function e(t,n){var a,r,c,u;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.resetForm,r=t.date,c=t.duration,u=t.description,e.next=4,o({variables:{taskId:l.id,date:r,duration:c,description:u}});case 4:e.sent.data.addTimeToTask.success&&(a({date:B()(),duration:"01:00",description:""}),i(!1),d.refetch(),m());case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}();return r.a.createElement(hn.a,{visible:c,content:r.a.createElement(Ca,null,r.a.createElement(C.b,{initialValues:{date:B()(),duration:"01:00",description:""},validationSchema:wa,onSubmit:f,render:function(e){return r.a.createElement(k.a,{onSubmit:e.handleSubmit},r.a.createElement(H,{label:"Date",placeholder:"Date",name:"date",block:!0,required:!0}),r.a.createElement(V,{label:"Time Duration",placeholder:"Time Duration (Hour:Minute)",name:"duration",block:!0,required:!0}),r.a.createElement(L,{label:"comment",placeholder:"comment",name:"description",block:!0}),r.a.createElement(k.a.Item,null,r.a.createElement(Ia,{type:"primary",htmlType:"submit"},"Save"),r.a.createElement(Ia,{onClick:function(){return i(!1)}},"Cancel")))}})),title:null,placement:"bottomLeft"},r.a.createElement(Ia,{type:"primary",block:!0,onClick:function(){return i(!0)}},"Add Time"))};function $a(){var e=Object(f.a)(["\n  mutation DeleteTask($id: ID!) {\n    deleteTask(id: $id)\n  }\n"]);return $a=function(){return e},e}var Pa=E()($a());function Da(){var e=Object(f.a)(["\n  mutation UpdateTask(\n    $id: ID!\n    $name: String\n    $description: String\n    $dueAt: String\n    $status: String\n  ) {\n    updateTask(\n      id: $id\n      name: $name\n      description: $description\n      dueAt: $dueAt\n      status: $status\n    ) {\n      success\n      message\n    }\n  }\n"]);return Da=function(){return e},e}var qa=E()(Da());function Aa(){var e=Object(f.a)(["\n  margin-right: 16px;\n"]);return Aa=function(){return e},e}function Ra(){var e=Object(f.a)(["\n  margin-right: 16px;\n"]);return Ra=function(){return e},e}function Na(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: space-between;\n"]);return Na=function(){return e},e}var Fa=P.object().shape({name:P.string().required("Name is Required")}),za=$.a.div(Na()),Ba=Object($.a)(I.a)(Ra()),Ma=Object($.a)(I.a)(Aa()),Va=function(e){var t=e.setShowEditTask,n=e.currentTask,c=e.setTaskModalVisible,i=Object(a.useContext)(ar).refetchProject,l=Object(T.a)(qa),o=Object(T.a)(Pa),u=n.name,s=n.description,m=n.dueAt,d=Ce.a.confirm,p=function(){var e=Object(x.a)(y.a.mark(function e(a){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),d({title:"Do you want to delete this section",content:"Deleting the section will also removes all the tasks associated with it.",onOk:function(){var e=Object(x.a)(y.a.mark(function e(){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({variables:{id:n.id}});case 2:e.sent.data.deleteTask&&(i(),t(!1),c(!1));case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),onCancel:function(){}});case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),f=function(){var e=Object(x.a)(y.a.mark(function e(a){var r,c,o;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.name,c=a.description,o=a.dueAt,e.next=3,l({variables:{id:n.id,name:r,description:c,dueAt:o}});case 3:e.sent.data.updateTask.success&&(t(!1),i());case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(C.b,{initialValues:{name:u,description:s,dueAt:m},validationSchema:Fa,onSubmit:f,render:function(e){return r.a.createElement(k.a,{onSubmit:e.handleSubmit},r.a.createElement(V,{placeholder:"Task name",label:"Name",name:"name"}),r.a.createElement(L,{rows:4,placeholder:"Task description",label:"Description",name:"description"}),r.a.createElement(H,{placeholder:"Due Date",label:"Due Date",name:"dueAt"}),r.a.createElement(Pe.a,null),r.a.createElement(k.a.Item,null,r.a.createElement(za,null,r.a.createElement("div",null,r.a.createElement(Ba,{type:"primary",htmlType:"submit"},"Update"),r.a.createElement(Ba,{onClick:function(){return t(!1)}},"Cancel")),r.a.createElement(Ma,{type:"danger",onClick:p},"Delete"))))}}))};function La(){var e=Object(f.a)(["\n  mutation StartTimer($taskId: ID!) {\n    startTimer(taskId: $taskId) {\n      success\n      message\n      result {\n        id\n        startedAt\n      }\n    }\n  }\n"]);return La=function(){return e},e}var Ha=E()(La());function Ja(){var e=Object(f.a)(["\n  mutation StopTimer($taskId: ID!) {\n    stopTimer(taskId: $taskId) {\n      success\n      message\n    }\n  }\n"]);return Ja=function(){return e},e}var Ua=E()(Ja());function Wa(){var e=Object(f.a)(["\n  margin: 8px 0;\n  background: red;\n  color: #fff;\n  &:hover {\n    background: red;\n    color: #fff;\n  }\n"]);return Wa=function(){return e},e}function Ga(){var e=Object(f.a)(["\n  margin: 8px 0;\n"]);return Ga=function(){return e},e}var Ka=function(e){var t=e.currentTask,n=e.isTimerStarted,c=e.timerStartedAt,i=e.refetchTimer,l=Object(a.useState)(n),o=Object(O.a)(l,2),u=o[0],s=o[1],m=B()(),d=B.a.duration(m.diff(c)),f=Object(a.useState)(d),b=Object(O.a)(f,2),E=b[0],v=b[1],h=Object(a.useState)(!1),g=Object(O.a)(h,2),j=g[0],k=g[1],S=Object(a.useContext)(ar),w=S.project,I=S.refetchProject,C=Object(p.a)(xn,{variables:{id:w.id}}),$=Object(T.a)(Ha),P=function(){var e=Object(x.a)(y.a.mark(function e(){var n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return k(!0),n=t.id,e.next=4,$({variables:{taskId:n}});case 4:s(!0),i(),setTimeout(function(){k(!1)},1200);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),D=Object(T.a)(Ua),q=function(){var e=Object(x.a)(y.a.mark(function e(){var n;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,e.next=3,D({variables:{taskId:n}});case 3:s(!1),i(),C.refetch(),I();case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),A=setInterval(function(){var e=B()(),t=B.a.duration(e.diff(c));v(t)},1e3);return Object(a.useEffect)(function(){return function(){clearTimeout(A)}}),r.a.createElement(r.a.Fragment,null,u?r.a.createElement(Ya,{block:!0,onClick:function(){return q()}},j?"starting":"".concat(B.a.utc(E.asMilliseconds()).format("HH:mm:ss"))):r.a.createElement(_a,{type:"primary",block:!0,onClick:function(){return P()}},"Start Timer"))},_a=Object($.a)(I.a)(Ga()),Ya=Object($.a)(I.a)(Wa()),Qa=function(e){var t=e.currentTask,n=Object(p.a)(Fn),a=n.data,c=n.error,i=n.loading,l=n.refetch;if(i||c)return null;var o=!!a.getTimer.result&&a.getTimer.result.task.id===t.id,u=null;return o&&(u=a.getTimer.result.startedAt),r.a.createElement(Ka,{currentTask:t,isTimerStarted:o,timerStartedAt:u,refetchTimer:l})};function Xa(){var e=Object(f.a)(["\n  margin: 8px 0;\n"]);return Xa=function(){return e},e}var Za=Object($.a)(I.a)(Xa()),er=function(e){var t=e.taskModalVisible,n=e.currentTask,c=e.setTaskModalVisible,i=Object(a.useState)(!1),l=Object(O.a)(i,2),o=l[0],u=l[1];return n?r.a.createElement(Ce.a,{title:n.name,visible:t,onOk:function(){return c(!1)},onCancel:function(){c(!1),u(!1)},footer:null,width:700,destroyOnClose:!0},o?r.a.createElement(Va,{setShowEditTask:u,setTaskModalVisible:c,currentTask:n}):r.a.createElement(r.a.Fragment,null,r.a.createElement(Je.a,null,r.a.createElement(Ue.a,{xs:24,sm:20},r.a.createElement("p",null,n.description||"No description.")),r.a.createElement(Ue.a,{xs:24,sm:4},r.a.createElement(Qa,{currentTask:n}),r.a.createElement(Ta,{currentTask:n}),r.a.createElement(Za,{block:!0,onClick:function(){return u(!0)}},"Edit Task"),r.a.createElement(ya,{currentTask:n}))),r.a.createElement(Pe.a,null),r.a.createElement(Je.a,null,r.a.createElement("span",null,"Created at ",B()(n.createdAt).format("LLL"))))):null},tr=P.object().shape({name:P.string().required("Name is Required")}),nr=function(e){var t=Object(a.useContext)(ar),n=t.project,c=t.refetchProject,i=n,l=Object(a.useState)(!1),o=Object(O.a)(l,2),u=o[0],s=o[1],m=Object(a.useState)(!1),d=Object(O.a)(m,2),p=d[0],f=d[1],b=Object(a.useState)(!1),E=Object(O.a)(b,2),v=E[0],h=E[1],g=Object(T.a)(dn),j=Object(T.a)(pn),w=Object(T.a)(un),$=Object(T.a)(ln),P=Object(a.useState)({sectionIndex:0,taskIndex:0}),D=Object(O.a)(P,2),q=D[0],A=D[1],R=Object(T.a)(bn),N=Object(a.useState)(!0),F=Object(O.a)(N,2),z=F[0],B=F[1],M=Object(a.useState)(""),V=Object(O.a)(M,2),H=V[0],J=V[1],U=function(){var e=Object(x.a)(y.a.mark(function e(t,n){var a,r,l,o;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.setSubmitting,r=n.setStatus,l=n.resetForm,e.prev=1,o=t.name,e.next=5,$({variables:{projectId:i.id,name:o}});case 5:B(!0),l(),c(),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),r({success:!1}),a(!1);case 14:case"end":return e.stop()}},e,null,[[1,10]])}));return function(t,n){return e.apply(this,arguments)}}(),W=function(){var e=Object(x.a)(y.a.mark(function e(t,n,a){var r,l,o,u,s;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.setSubmitting,l=a.setStatus,o=a.resetForm,e.prev=1,u=n.name,s=JSON.parse(JSON.stringify(i)),e.next=6,w({variables:{sectionId:s.sections[t].id,name:u}});case 6:o(),J(""),c(),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(1),l({success:!1}),r(!1);case 15:case"end":return e.stop()}},e,null,[[1,11]])}));return function(t,n,a){return e.apply(this,arguments)}}(),G=Ce.a.confirm,K=function(){var e=Object(x.a)(y.a.mark(function e(t){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:G({title:"Do you want to delete this section",content:"Deleting the section will also removes all the tasks associated with it.",onOk:function(){var e=Object(x.a)(y.a.mark(function e(){return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R({variables:{id:t}});case 2:c(),Ce.a.destroyAll();case 4:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),onCancel:function(){Ce.a.destroyAll()},zIndex:1e6,maskClosable:!0});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=Object(x.a)(y.a.mark(function e(t){var n,a,r,l,o,u,s,m;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.source,a=t.destination){e.next=3;break}return e.abrupt("return");case 3:if(n.droppableId!==a.droppableId){e.next=13;break}return r=n.droppableId.split("-")[1],l=En(i.sections[r].tasks,n.index,a.index),i.sections[r].tasks=l,e.next=10,g({variables:{sectionId:i.sections[r].id,from:n.index,to:a.index}});case 10:setTimeout(function(){return c()},1e3),e.next=21;break;case 13:return o=n.droppableId.split("-")[1],u=a.droppableId.split("-")[1],s=vn(i.sections[o].tasks,i.sections[u].tasks,n,a),m=i,Object.keys(s).map(function(e){var t=e.split("-")[1];return m.sections[t].tasks=s[e],s[e]}),e.next=20,j({variables:{sourceSectionId:i.sections[o].id,destinationSectionId:i.sections[u].id,from:n.index,to:a.index}});case 20:setTimeout(function(){return c()},1e3);case 21:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}();return r.a.createElement(r.a.Fragment,null,r.a.createElement(pa,null,r.a.createElement("div",{className:"left-actions"},r.a.createElement("h1",null,i.name),r.a.createElement(Ee.a,{overlay:r.a.createElement(ve.b,null,r.a.createElement(ve.b.Item,{key:"0"},r.a.createElement("a",{onClick:function(){return f(!0)}},"Edit Project")),r.a.createElement(ve.b.Item,{key:"1"},r.a.createElement("a",{href:"#"},"Delete Project"))),trigger:["click"]},r.a.createElement("a",{className:"ant-dropdown-link",href:"#"},r.a.createElement(S.a,{type:"small-dash",style:{fontSize:28,fontWeight:700}})))),r.a.createElement("div",{className:"right-actions"},r.a.createElement(Cn,null),r.a.createElement(Rn,null))),r.a.createElement(la,null,r.a.createElement(rn.a,{onDragEnd:function(e){return _(e)}},i.sections.map(function(e,t){return r.a.createElement(oa,{key:e.id},r.a.createElement(ma,{overlay:r.a.createElement(r.a.Fragment,null,u?r.a.createElement(we.a,null,r.a.createElement(Zn,{setEditSectionView:s,refetchProject:c,section:e})):r.a.createElement(ve.b,null,r.a.createElement(ve.b.Item,{key:"0"},r.a.createElement("a",{onClick:function(){return s(!0)}},"Rename Section")),r.a.createElement(ve.b.Item,null,r.a.createElement("a",{onClick:function(){return K(e.id)}},"Delete Section")))),trigger:["click"]},r.a.createElement("div",{className:"ant-dropdown-link"},r.a.createElement("span",null,e.name),r.a.createElement("span",null,r.a.createElement(an.a,{color:"magenta"},"4")," ",r.a.createElement(S.a,{type:"down"})))),r.a.createElement("p",null,"11h 35m"),r.a.createElement(rn.c,{droppableId:"droppable-".concat(t)},function(n){return r.a.createElement(sa,Object.assign({},n.droppableProps,{ref:n.innerRef}),e.tasks.map(function(e,n){return r.a.createElement("div",{key:e.id},r.a.createElement(rn.b,{key:e.id,draggableId:e.id,index:n},function(a){return r.a.createElement("div",Object.assign({},a.draggableProps,a.dragHandleProps,{ref:a.innerRef}),r.a.createElement(ua,{onClick:function(){A({sectionIndex:t,taskIndex:n}),h(!0)}},r.a.createElement("p",null,e.name),r.a.createElement("div",{className:"card-meta"},r.a.createElement("p",null,function(e){if(!e.timerRecords)return 0;var t=e.timerRecords.reduce(function(e,t){return e+parseInt(t.duration)},0);return Math.floor(t/3600)}(e),"h"," ",e.estimate?"of ".concat(e.estimate.total,"h"):null),r.a.createElement(Vn,{task:e}),r.a.createElement("div",null,r.a.createElement(he.a,{size:"small",src:"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}),r.a.createElement(he.a,{size:"small",style:{backgroundColor:"#87d068"},icon:"user"})))))}))}),H===e.id?r.a.createElement(C.b,{initialValues:{name:""},validationSchema:tr,onSubmit:function(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return W.apply(void 0,[t].concat(n))},render:function(e){return r.a.createElement(k.a,{onSubmit:e.handleSubmit},r.a.createElement(L,{rows:4,name:"name",placeholder:"Task Name"}),r.a.createElement(k.a.Item,null,r.a.createElement(I.a,{type:"primary",htmlType:"submit",block:!0},"Add Card")))}}):r.a.createElement(I.a,{type:"dashed",block:!0,onClick:function(){return t=e.id,void J(t);var t}},"Add Card"))}))}),r.a.createElement(oa,null,r.a.createElement(sa,null,z?r.a.createElement(da,null,r.a.createElement(I.a,{className:"add-project-area",type:"dashed",block:!0,onClick:function(){B(!1)}},"Add Task Section")):r.a.createElement(da,null,r.a.createElement(C.b,{initialValues:{name:""},validationSchema:tr,onSubmit:U,render:function(e){return r.a.createElement(k.a,{onSubmit:e.handleSubmit},r.a.createElement(L,{rows:4,name:"name",placeholder:"Section Name"}),r.a.createElement(k.a.Item,null,r.a.createElement(I.a,{type:"primary",htmlType:"submit",block:!0},"Add Section")))}}))))),i.sections[q.sectionIndex]&&i.sections[q.sectionIndex].tasks[q.taskIndex]?r.a.createElement(er,{currentTask:i.sections[q.sectionIndex].tasks[q.taskIndex],taskModalVisible:v,setTaskModalVisible:h}):null,r.a.createElement(Ce.a,{title:"Edit Project",visible:p,onOk:function(){return f(!1)},onCancel:function(){f(!1)},footer:null,width:700,destroyOnClose:!0},r.a.createElement(Gn,{setEditProjectVisible:f}))))},ar=r.a.createContext({project:{},refetchProject:function(){}}),rr=function(e){var t=e.location.pathname.split("/projects/")[1],n=Object(p.a)(nn,{variables:{slug:t}});if(n.loading)return null;if(n.error)return r.a.createElement("div",null,"Error! ".concat(n.error));var a=n.data.getProjectBySlug;return a.success?r.a.createElement(ar.Provider,{value:{project:a.result,refetchProject:n.refetch}},r.a.createElement(nr,null)):null},cr=n(210);function ir(){var e=Object(f.a)(["\n  {\n    getReportsByMember {\n      uid\n      name\n      totalDuration\n      tasks {\n        tid\n        totalDuration\n        name\n      }\n    }\n  }\n"]);return ir=function(){return e},e}var lr=E()(ir()),or=[{title:"Member Name",dataIndex:"name",key:"name",width:"80%"},{title:"Duration",dataIndex:"totalDuration",key:"totalDuration",render:function(e){return B.a.utc(1e3*parseInt(e)).format("HH:mm")}}],ur=function(e){var t=[{title:"Task",dataIndex:"task",key:"task",width:"80%"},{title:"Duration",dataIndex:"duration",key:"duration",render:function(e){return B.a.utc(1e3*parseInt(e)).format("HH:mm")}}],n=[],a=!0,c=!1,i=void 0;try{for(var l,o=e.tasks[Symbol.iterator]();!(a=(l=o.next()).done);a=!0){var u=l.value;n.push({key:u.tid,task:u.name,duration:u.totalDuration})}}catch(s){c=!0,i=s}finally{try{a||null==o.return||o.return()}finally{if(c)throw i}}return r.a.createElement(Ie.a,{columns:t,dataSource:n,pagination:!1})},sr=function(){var e=Object(p.a)(lr);if(e.loading)return null;var t=e.data.getReportsByMember;return t.map(function(e){return e.key=e.uid,e}),r.a.createElement(Ie.a,{columns:or,dataSource:t,expandedRowRender:ur})};function mr(){var e=Object(f.a)(["\n  span {\n    color: #777;\n  }\n  p {\n    margin-bottom: 2px;\n  }\n"]);return mr=function(){return e},e}var dr=$.a.div(mr()),pr=[{title:"Task",dataIndex:"name",key:"name",width:"30%"},{title:r.a.createElement(dr,null,r.a.createElement("p",null,"Sunday"),r.a.createElement("span",null,"June 11")),dataIndex:"sunday",key:"sunday",width:"10%"},{title:r.a.createElement(dr,null,r.a.createElement("p",null,"Monday"),r.a.createElement("span",null,"June 12")),dataIndex:"monday",key:"monday",width:"10%"},{title:r.a.createElement(dr,null,r.a.createElement("p",null,"Tuesday"),r.a.createElement("span",null,"June 13")),dataIndex:"tuesday",key:"tuesday",width:"10%"},{title:r.a.createElement(dr,null,r.a.createElement("p",null,"Wednesday"),r.a.createElement("span",null,"June 14")),dataIndex:"wednesday",key:"wednesday",width:"10%"},{title:r.a.createElement(dr,null,r.a.createElement("p",null,"Thursday"),r.a.createElement("span",null,"June 15")),dataIndex:"thursday",key:"thursday",width:"10%"},{title:r.a.createElement(dr,null,r.a.createElement("p",null,"Friday"),r.a.createElement("span",null,"June 16")),dataIndex:"friday",key:"friday",width:"10%"},{title:r.a.createElement(dr,null,r.a.createElement("p",null,"Saturday"),r.a.createElement("span",null,"June 17")),dataIndex:"saturday",key:"saturday",width:"10%"},{title:"Total",dataIndex:"total",key:"total",width:"10%"}],fr=[{key:"1",name:"John Brown"},{key:"2",name:"Jim Green"},{key:"3",name:"Joe Black"}],br=function(){return r.a.createElement(Ie.a,{columns:pr,dataSource:fr,pagination:!1})};function Er(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  justify-content: space-between;\n  align-items: center;\n  h1 {\n    padding: 8px 0;\n  }\n"]);return Er=function(){return e},e}var vr=$.a.div(Er()),hr=function(e){var t="summary",n=e.history.location.pathname;n.includes("detailed")&&(t="detailed"),n.includes("timesheet")&&(t="timesheet");var c=Object(a.useState)(t),i=Object(O.a)(c,2),l=i[0],o=i[1];return r.a.createElement(r.a.Fragment,null,r.a.createElement(we.a,{title:r.a.createElement(r.a.Fragment,null,r.a.createElement(vr,null,r.a.createElement("h1",null,"Reports")),r.a.createElement(cr.a.Group,{value:l,onChange:function(t){var n=t.target.value;o(n),"summary"===n&&(n=""),e.history.push("/dashboard/reports/".concat(n))}},r.a.createElement(cr.a.Button,{value:"summary"},"Summary"),r.a.createElement(cr.a.Button,{value:"timesheet"},"Timesheet")))},r.a.createElement(s.d,null,r.a.createElement(s.b,{path:"/dashboard/reports",exact:!0,component:sr}),r.a.createElement(s.b,{path:"/dashboard/reports/timesheet",component:br}))))},gr=n(760),jr=n(764);function yr(){var e=Object(f.a)(["\n  {\n    getUserTimerRecords {\n      success\n      message\n      results {\n        id\n        duration\n        date\n        description\n        startedAt\n        stoppedAt\n        type\n        task {\n          id\n          name\n        }\n        user {\n          email\n        }\n      }\n    }\n  }\n"]);return yr=function(){return e},e}var xr=E()(yr());function Or(){var e=Object(f.a)(["\n  font-size: 20px;\n  padding: 10px 0;\n"]);return Or=function(){return e},e}function kr(){var e=Object(f.a)(["\n  background: red;\n  width: 100%;\n  color: #fff;\n  &:hover {\n    background: red;\n    color: #fff;\n  }\n"]);return kr=function(){return e},e}var Sr=P.object().shape({task:P.string().required("Task is Required")}),wr=function(e){var t=e.currentTimer,n=e.refetchTimer,c=e.refetchTimerRecords,i=B()(),l=t.startedAt,o=B.a.duration(i.diff(l)),u=Object(a.useState)(o),s=Object(O.a)(u,2),m=s[0],d=s[1],p=Object(T.a)(Ua),f=function(){var e=Object(x.a)(y.a.mark(function e(){var a;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.task.id,e.next=3,p({variables:{taskId:a}});case 3:n(),c();case 5:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}(),b=setInterval(function(){var e=B()(),t=B.a.duration(e.diff(l));d(t)},1e3);return Object(a.useEffect)(function(){return function(){clearTimeout(b)}}),r.a.createElement(Ir,{size:"large",onClick:function(){return f()}},"".concat(B.a.utc(m.asMilliseconds()).format("HH:mm:ss")))},Ir=Object($.a)(I.a)(kr()),Cr=$.a.p(Or()),Tr=function(e){var t=e.refetchTimerRecords,n=Object(p.a)(rt),a=Object(T.a)(Ha),c=Object(p.a)(Fn),i=null;if(c.loading)return null;c.loading||c.error||(i=c.data.getTimer.result);var l=function(){var e=Object(x.a)(y.a.mark(function e(t,n){var r,i;return y.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.resetForm,i=t.task,e.next=4,a({variables:{taskId:i[2]}});case 4:e.sent.data.startTimer.success&&(r(),c.refetch());case 6:case"end":return e.stop()}},e)}));return function(t,n){return e.apply(this,arguments)}}(),o=[];if(!n.loading&&!n.error){var u=n.data.getProjectWithTasks.results;u&&(o=u.map(function(e){return e.label=e.name,e.value=e.id,e.children=e.sections,e.children.map(function(e){return e.label=e.name,e.value=e.id,e.children=e.tasks,e.children.map(function(e){return e.label=e.name,e.value=e.id,e}),e}),e}))}return r.a.createElement(C.b,{initialValues:{},validationSchema:Sr,onSubmit:l,render:function(e){return r.a.createElement(k.a,{layout:"vertical",onSubmit:e.handleSubmit},r.a.createElement(Je.a,{gutter:4,type:"flex",justify:"space-between",align:"top"},r.a.createElement(Ue.a,{xs:24,lg:20},i?r.a.createElement(Cr,null,i.task.name):r.a.createElement(W,{name:"task",options:o,size:"large",style:{width:"100%"},placeholder:"Select task from the projects."})),r.a.createElement(Ue.a,{xs:24,lg:4},i?r.a.createElement(wr,{currentTimer:i,refetchTimer:c.refetch,refetchTimerRecords:t}):r.a.createElement(I.a,{type:"primary",size:"large",style:{width:"100%"},htmlType:"submit"},"Start Timer"))))}})};function $r(){var e=Object(f.a)(["\n  display: flex;\n  padding-top: 8px;\n  .timer-duration {\n    color: #1da57a;\n    margin-left: 16px;\n  }\n"]);return $r=function(){return e},e}function Pr(){var e=Object(f.a)(["\n  margin: 0;\n  .ant-collapse-header {\n    padding-left: 16px !important;\n    span {\n      color: #666;\n    }\n  }\n"]);return Pr=function(){return e},e}function Dr(){var e=Object(f.a)(["\n  border-bottom: 0px !important;\n  i {\n    left: 0 !important;\n    color: #888;\n  }\n"]);return Dr=function(){return e},e}function qr(){var e=Object(f.a)(["\n  display: inline-block;\n  display: flex;\n  align-items: baseline;\n  h3 {\n    margin-right: 12px;\n  }\n"]);return qr=function(){return e},e}var Ar=gr.a.Panel,Rr=$.a.div(qr()),Nr=Object($.a)(Ar)(Dr()),Fr=Object($.a)(gr.a)(Pr()),zr=$.a.div($r()),Br=function(){var e=Object(p.a)(xr);if(e.error)return r.a.createElement("div",null,"No Timer Records");if(e.loading)return null;var t=function(e){var t=e.reduce(function(e,t){var n=t.date.split("T")[0];return e[n]||(e[n]=[]),e[n].push(t),e},{});return Object.keys(t).map(function(e){var n=t[e].reduce(function(e,t){var n=t.task.id;return e[n]||(e[n]=[]),e[n].push(t),e},{});return{date:e,dateRecords:Object.keys(n).map(function(e){var t=n[e].reduce(function(e,t){return parseInt(t.duration)+e},0);return{task:n[e][0].task.name,totalDuration:t,taskRecords:n[e]}})}})}(e.data.getUserTimerRecords.results);return r.a.createElement("div",null,r.a.createElement(Je.a,null,r.a.createElement(we.a,{title:r.a.createElement(Tr,{refetchTimerRecords:e.refetch})},t.length>0?t.map(function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Rr,null,r.a.createElement("h3",null,B()(e.date).fromNow()),r.a.createElement("p",null,B()(e.date).format("LL"))),r.a.createElement(jr.a,{itemLayout:"horizontal",dataSource:e.dateRecords,renderItem:function(e){return r.a.createElement(jr.a.Item,{style:{margin:"24px 0"}},r.a.createElement(Je.a,{gutter:36,type:"flex",justify:"space-between"},r.a.createElement(Ue.a,null,r.a.createElement("div",{style:{width:100}},r.a.createElement(S.a,{type:"clock-circle",style:{fontSize:24,margin:"4px 16px"}}),r.a.createElement("p",null,B.a.utc(1e3*e.totalDuration).format("HH:mm:ss")))),r.a.createElement(Ue.a,null,r.a.createElement("h3",null,e.task),r.a.createElement(Fr,{bordered:!1,defaultActiveKey:["0"],expandIcon:function(e){var t=e.isActive;return r.a.createElement(S.a,{type:"caret-right",rotate:t?90:0})}},r.a.createElement(Nr,{header:r.a.createElement("span",null,"History"),key:"1"},e.taskRecords.map(function(e){return r.a.createElement(zr,null,r.a.createElement("p",null,r.a.createElement(an.a,{color:"magenta"},e.type),e.startedAt?B()(e.startedAt).format("LLL"):B()(e.date).format("LL")),r.a.createElement("p",{className:"timer-duration"},B.a.utc(1e3*e.duration).format("HH:mm:ss")))}))))))}}))}):"No Timer Records.")))};function Mr(){var e=Object(f.a)(["\n  text-align: center;\n"]);return Mr=function(){return e},e}function Vr(){var e=Object(f.a)(["\n  margin: 0 16px;\n  padding: 36px;\n  min-height: 450;\n\n  @media (max-width: 767px) {\n    margin: 36px 8px;\n    padding: 6px 8px;\n  }\n"]);return Vr=function(){return e},e}function Lr(){var e=Object(f.a)(["\n  background: #fff;\n  padding: 0;\n  display: flex;\n  flex-direction: row;\n  height: 80px;\n  padding: 12px 0;\n  border-bottom: 1px solid #e3e3e3;\n"]);return Lr=function(){return e},e}function Hr(){var e=Object(f.a)(["\n  @media (min-width: 768px) {\n    display: none;\n  }\n  margin: 16px;\n"]);return Hr=function(){return e},e}function Jr(){var e=Object(f.a)(["\n  background: #fff;\n  .logo-area {\n    height: 75px;\n    padding: 0;\n    margin: 0;\n    display: flex;\n    justify-content: center;\n    img {\n      width: 180px;\n    }\n  }\n  @media (max-width: 767px) {\n    display: none;\n  }\n"]);return Jr=function(){return e},e}var Ur=fe.a.Header,Wr=fe.a.Content,Gr=fe.a.Footer,Kr=fe.a.Sider,_r=Object($.a)(Kr)(Jr()),Yr=Object($.a)(I.a)(Hr()),Qr=Object($.a)(Ur)(Lr()),Xr=Object($.a)(Wr)(Vr()),Zr=Object($.a)(Gr)(Mr()),ec=function(e){var t=Object(a.useState)(!1),n=Object(O.a)(t,2),c=n[0],i=n[1],l=Object(a.useState)(!1),o=Object(O.a)(l,2),u=o[0],m=o[1];return r.a.createElement(fe.a,{style:{minHeight:"100vh"}},r.a.createElement(_r,{collapsible:!0,collapsed:c,onCollapse:function(e){i(e)},style:{background:"#fff"},width:250},r.a.createElement("div",{className:"logo-area"},r.a.createElement("img",{alt:"logo",src:"https://wac-cdn.atlassian.com/dam/jcr:616e6748-ad8c-48d9-ae93-e49019ed5259/Atlassian-horizontal-blue-rgb.svg?cdnVersion=359"})),r.a.createElement(Se,null)),r.a.createElement(be.a,{title:r.a.createElement("div",{className:"logo-area"},r.a.createElement("img",{alt:"logo",src:"https://wac-cdn.atlassian.com/dam/jcr:616e6748-ad8c-48d9-ae93-e49019ed5259/Atlassian-horizontal-blue-rgb.svg?cdnVersion=359"})),placement:"left",onClose:function(){m(!1)},visible:u},r.a.createElement(Se,null)),r.a.createElement(fe.a,null,r.a.createElement(Qr,null,r.a.createElement(Yr,{onClick:function(){m(!0)},icon:"menu",size:"large"}),r.a.createElement(Oe,{history:e.history})),r.a.createElement(Xr,null,r.a.createElement(s.d,null,r.a.createElement(g,{exact:!0,path:"/dashboard",component:He}),r.a.createElement(g,{path:"/dashboard/timer",component:Br}),r.a.createElement(g,{path:"/dashboard/projects",exact:!0,component:Zt}),r.a.createElement(g,{path:"/dashboard/projects/:project",component:rr}),r.a.createElement(g,{path:"/dashboard/clients",component:Le}),r.a.createElement(g,{path:"/dashboard/reports",component:hr}),r.a.createElement(g,{path:"/dashboard/expenses",component:wt}),r.a.createElement(g,{path:"/dashboard/invoices",component:Mt}))),r.a.createElement(Zr,null,"EvenTime - 2019")))};function tc(){return r.a.createElement(s.a,{to:"/dashboard"})}var nc=function(){return r.a.createElement(m.a,null,r.a.createElement(s.d,null,r.a.createElement(s.b,{exact:!0,path:"/",component:tc}),r.a.createElement(g,{path:"/dashboard",component:ec}),r.a.createElement(s.b,{exact:!0,path:"/login",component:ae}),r.a.createElement(s.b,{exact:!0,path:"/register",component:pe})))},ac=new l.a({uri:"http://localhost:8000/graphql",credentials:"include",cache:new o.a}),rc=function(){return r.a.createElement(u.a,{client:ac},r.a.createElement(a.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(nc,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(r.a.createElement(rc,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[419,1,2]]]);
//# sourceMappingURL=main.2985faf3.chunk.js.map